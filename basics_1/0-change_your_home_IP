#!/usr/bin/env bash

if [[ $EUID -ne 0 ]]; then
  echo "Ce script doit être exécuté avec sudo ou en tant que root."
  exit 1
fi

HOSTS_FILE="/etc/hosts"
BACKUP_FILE="/etc/hosts.bak.$(date +%Y%m%d%H%M%S)"

cp "$HOSTS_FILE" "$BACKUP_FILE"
echo "Sauvegarde du fichier hosts dans $BACKUP_FILE"

set_host() {
  local ip="$1"
  local hostname="$2"
  
  sed -i "/[[:space:]]$hostname$/d" "$HOSTS_FILE"
  
  echo -e "$ip\t$hostname" >> "$HOSTS_FILE"
}

set_host "127.0.0.2" "localhost"
set_host "8
