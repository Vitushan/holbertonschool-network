#!/bin/bash

HOSTS_FILE="/etc/hosts"
BACKUP_FILE="/etc/hosts.bak.$(date +%F_%T)"

# Backup
sudo cp $HOSTS_FILE $BACKUP_FILE
echo "Backup saved at: $BACKUP_FILE"

# Update localhost
if grep -q "^127\.0\.0\.1\s\+localhost" $HOSTS_FILE; then
    sudo sed -i 's/^127\.0\.0\.1\s\+localhost/127.0.0.2 localhost/' $HOSTS_FILE
else
    echo "127.0.0.2 localhost" | sudo tee -a $HOSTS_FILE
fi

# Update facebook.com
if grep -q "facebook.com" $HOSTS_FILE; then
    sudo sed -i 's/^.*facebook\.com.*/8.8.8.8 facebook.com/' $HOSTS_FILE
else
    echo "8.8.8.8 facebook.com" | sudo tee -a $HOSTS_FILE
fi

echo "Configuration complete."
