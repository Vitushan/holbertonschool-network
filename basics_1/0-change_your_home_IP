#!/usr/bin/env bash

# Check if the script is run as root
if [[ $EUID -ne 0 ]]; then
  echo "This script must be run as root or with sudo."
  exit 1
fi

HOSTS_FILE="/etc/hosts"
BACKUP_FILE="/etc/hosts.bak.$(date +%Y%m%d%H%M%S)"

# Backup the current hosts file
cp "$HOSTS_FILE" "$BACKUP_FILE"
echo "Backup of /etc/hosts saved to $BACKUP_FILE"

# Function to add or update an entry in /etc/hosts
update_host_entry() {
  local ip_address="$1"
  local hostname="$2"
  # Remove any existing entry for the hostname
  sed -i "/[[:space:]]$hostname$/d" "$HOSTS_FILE"
  # Add the new entry at the end
  echo -e "$ip_address\t$hostname" >> "$HOSTS_FILE"
}

# Update entries
update_host_entry "127.0.0.2" "localhost"
update_host_entry "8.8.8.8" "facebook.com"

echo "Updated /etc/hosts entries:"
grep -E "localhost|facebook.com" "$HOSTS_FILE"

